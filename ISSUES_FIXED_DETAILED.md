# ุชูุฑูุฑ ุงููุดุงูู ูุงูุญููู - 30 ููุงูุฑ 2025

## ๐ ุงููุดุงูู ุงูููุชุดูุฉ ูุงููุญูููุฉ

### โ 1. ูุดููุฉ ุนุฏู ุนุฑุถ ุฃุฑูุงู ุงููุนุงูู (Lab Codes)

**ุงููุดููุฉ:**
- ุฃุฑูุงู ุงููุนุงูู ูุง ุชุธูุฑ ูู ูุงุฆูุฉ ุงูุฃุฌูุฒุฉ
- `getLaboratoryName` ุจุทูุก ูุบูุฑ ูุญุณูู
- ุงูุจูุงูุงุช ุชุญุชุงุฌ refresh ุนูุฏ ุชุบููุฑ ุงูููุงุชุฑ

**ุงูุณุจุจ:**
```typescript
// โ ุงูููุฏ ุงููุฏูู
const getLaboratoryName = (id: number) => {
  return allLaboratories.find((l) => l.id === id)?.name || "Unknown";
};
// ูุจุญุซ ูู ูู ูุฑุฉ ุนู ุงููุนุงูู
```

**ุงูุญู ุงููุทุจู:**
```typescript
// โ ุงูููุฏ ุงูุฌุฏูุฏ
const labMap = useMemo(() => {
  const map = new Map();
  allLaboratories.forEach((lab: any) => {
    map.set(lab.id, lab);
  });
  return map;
}, [allLaboratories]);

const getLaboratoryInfo = (id: number) => {
  const lab = labMap.get(id);
  if (!lab) return { name: "Unknown", code: "---" };
  return { name: lab.name, code: lab.code };
};
```

**ุงูุชุญุฏูุซุงุช:**
- โ ุฅุถุงูุฉ ุฎุฑูุทุฉ ูุญุณููุฉ ูููุนุงูู
- โ ุนุฑุถ ููุฏ ุงููุนุงูู ุจุดูู ูุงุถุญ
- โ ุชุญุณูู ุงูุฃุฏุงุก ุจุงุณุชุฎุฏุงู useMemo
- โ ุนุฑุถ ุงูุงุณู ูุงูููุฏ ูุนุงู

**ุงูููู ุงููุนุฏู:**
- `client/src/pages/DeviceList.tsx`

---

### โ๏ธ 2. ูุดููุฉ ุนุฏู ุญูุธ ุงูุฃุฌูุฒุฉ ุงูุฌุฏูุฏุฉ

**ุงูุฃุนุฑุงุถ:**
- ุนูุฏ ูุญุงููุฉ ุฅุถุงูุฉ ุฌูุงุฒ ุฌุฏูุฏุ ูุง ูุชู ุงูุญูุธ ูู ุงููุธุงู
- ูุง ุชูุฌุฏ ุฑุณุงูุฉ ุฎุทุฃ ูุงุถุญุฉ

**ุงูุฃุณุจุงุจ ุงููุญุชููุฉ:**
1. **ูุดููุฉ ุงูุตูุงุญูุงุช** - `create` ุชุญุชุงุฌ `adminProcedure`
2. **ูุดููุฉ ุงูุจูุงูุงุช** - ูุฏ ูุง ูุชู ุชูุฑูุฑ ุงูุจูุงูุงุช ุตุญูุญุฉ
3. **ุนุฏู ุชูุฏูู ุงูุฃุฎุทุงุก ุจูุถูุญ**

**ุงูุญู ุงููุทุจู:**
```typescript
// โ ุชุญุณููุงุช ูู logging ุงูุฃุฎุทุงุก
const onSubmit = async (data: DeviceFormData) => {
  try {
    console.log("Submitting device:", { ...data }); // ุชุณุฌูู ุงูุจูุงูุงุช
    
    await createDeviceMutation.mutateAsync({
      // ุจูุงูุงุช ุตุญูุญุฉ
    });
  } catch (error: any) {
    console.error("Error details:", {
      message: error?.message,
      code: error?.code,
      data: error?.data,
    });
  }
};
```

**ุงูููู ุงููุนุฏู:**
- `client/src/pages/NewDevice.tsx`

**ุงูููุงุท ุงููููุฉ:**
1. **ุงูุชุญูู ูู ุงูุตูุงุญูุงุช:**
   - ุงููุณุชุฎุฏู ูุฌุจ ุฃู ูููู Admin
   - ุชุณุฌูู ุงูุฏุฎูู ูุทููุจ

2. **ุงูุจูุงูุงุช ุงููุทููุจุฉ:**
   - name, category, faculty, department, laboratory
   - purchaseDate, purchasePrice, expectedLifetimeYears

3. **ุงูุฎุทุฃ ุงูุดุงุฆุน:**
   - ุตูุบุฉ ุงูุชุงุฑูุฎ ูุฌุจ ุฃู ุชููู Date object
   - ุงูุฃุณุนุงุฑ ูุฌุจ ุฃู ุชููู string

---

### โ๏ธ 3. ูุดููุฉ ููู ุงูุนูุฏุฉ (Transfer) ุบูุฑ ุงููุงูู

**ุงูุญุงูุฉ ุงูุญุงููุฉ:**
- Transfer ูุนูู ุฌุฒุฆูุงู
- ูุง ูุชู ุชุญุฏูุซ ูููุน ุงูุฌูุงุฒ ุงููุนูู

**ุงููุดุงูู:**
1. ุนูููุฉ Transfer ูุง ุชุญุฏูุซ `currentLaboratoryId` ููุฌูุงุฒ
2. ูุง ูุชู ุชุณุฌูู ุงูุชุงุฑูุฎ ุจุดูู ุตุญูุญ
3. ุงูููุงููุฉ (Approve) ูุง ุชุนูู ูุงููุงู

**ุงูุญู ุงูููุชุฑุญ:**
```typescript
// ุชุญุฏูุซ ุฏุงูุฉ Transfer
export async function updateTransfer(transferId: number, status: string) {
  const transfer = await db.getTransferById(transferId);
  if (!transfer) return null;

  // ุชุญุฏูุซ ุงูุฌูุงุฒ ุจุงููููุน ุงูุฌุฏูุฏ
  if (status === 'approved') {
    await db.updateDevice(transfer.deviceId, {
      currentLaboratoryId: transfer.toLaboratoryId,
      currentDepartmentId: transfer.toDepartmentId,
      currentFacultyId: transfer.toFacultyId,
    });
  }

  return await db.createTransfer({ ...transfer, status });
}
```

**ูุญุชุงุฌ ุฅูู:**
- [ ] ุชุญุฏูุซ Database Functions
- [ ] ุชุญุฏูุซ Router Procedures
- [ ] ุงุฎุชุจุงุฑ ุดุงูู

---

### โ๏ธ 4. ูุดููุฉ ุงูุชูุงุฑูุฑ ุบูุฑ ุงูููุตูุฉ

**ุงููุดุงูู:**
1. ุงูุชูุงุฑูุฑ ุชุนุชูุฏ ุนูู `pharmacy-devices` ููุจูุงูุงุช
2. ุงูุฅุญุตุงุฆูุงุช ูุฏ ูุง ุชููู ุฏูููุฉ
3. ูุง ุชูุฌุฏ ุชูุงุฑูุฑ ููุตูุฉ ุนู ุงููุนุงููุงุช

**ุงูุฅุญุตุงุฆูุงุช ุงูุญุงููุฉ:**
```typescript
dashboard.stats = getPharmacyStats()  // โ ุจูุงูุงุช ูุฒููุฉ
```

**ุงูุญู ุงูููุชุฑุญ:**
```typescript
// โ ุงุณุชุฎุฏุงู ุงูุจูุงูุงุช ุงููุนููุฉ
stats: publicProcedure.query(async () => {
  const devices = await db.listDevices({ limit: 10000 });
  
  return {
    totalDevices: devices.length,
    working: devices.filter(d => d.currentStatus === 'working').length,
    maintenance: devices.filter(d => d.currentStatus === 'under_maintenance').length,
    outOfService: devices.filter(d => d.currentStatus === 'out_of_service').length,
    byFaculty: [...],  // ุชูุตูู ุญุณุจ ุงููููุฉ
    byDepartment: [...],  // ุชูุตูู ุญุณุจ ุงููุณู
    byLaboratory: [...],  // ุชูุตูู ุญุณุจ ุงููุนุงูู
  };
})
```

**ุงูุชุญุณููุงุช ุงููุทููุจุฉ:**
- [ ] ุชูุงุฑูุฑ ุญุณุจ ุงููุนุงูู
- [ ] ุชูุงุฑูุฑ ุงูุตูุงูุฉ ุงููุชููุนุฉ
- [ ] ุชูุงุฑูุฑ ุงูุฅููุงู
- [ ] ุชูุงุฑูุฑ ุงูููู ูุงูุญุฑูุฉ

---

## ๐ ููุฎุต ุงูุฅุตูุงุญุงุช

| ุงููุดููุฉ | ุงูุญุงูุฉ | ุงูููู | ุงูุฃููููุฉ |
|--------|--------|------|---------|
| ุนุฏู ุนุฑุถ ุฃุฑูุงู ุงููุนุงูู | โ ุชู | DeviceList.tsx | ุนุงููุฉ |
| ุนุฏู ุญูุธ ุงูุฃุฌูุฒุฉ | โ๏ธ ุฌุฒุฆู | NewDevice.tsx | ุญุฑุฌุฉ |
| Transfer ุบูุฑ ูุงูู | โ๏ธ ุฌุฒุฆู | routers.ts, db.ts | ุนุงููุฉ |
| ุงูุชูุงุฑูุฑ ุบูุฑ ููุตูุฉ | โ๏ธ ุฌุฒุฆู | routers.ts, Reports.tsx | ูุชูุณุทุฉ |

---

## ๐ง ุงูุฎุทูุงุช ุงูุชุงููุฉ (ุฃููููุงุช ุงูุชุตุญูุญ)

### 1๏ธโฃ ุงูุฃููููุฉ ุงููุตูู (ุงูููู)
- [ ] ุงุฎุชุจุงุฑ ุฅุถุงูุฉ ุฌูุงุฒ ุฌุฏูุฏ ุจุตูุงุญูุงุช Admin
- [ ] ุงูุชุญูู ูู ุฑุณุงุฆู ุงูุฃุฎุทุงุก ูู Console
- [ ] ุชุตุญูุญ ูุดููุฉ Transfer ุจุชุญุฏูุซ ุงููููุน

### 2๏ธโฃ ุงูุฃููููุฉ ุงูุนุงููุฉ (ุบุฏุงู)
- [ ] ุชุญุณูู ุงูุชูุงุฑูุฑ ุจุงูุจูุงูุงุช ุงููุนููุฉ
- [ ] ุฅุถุงูุฉ ุชูุงุฑูุฑ ุญุณุจ ุงููุนุงูู
- [ ] ุชุญุณูู ุงูุฅุญุตุงุฆูุงุช

### 3๏ธโฃ ุงูุฃููููุฉ ุงููุชูุณุทุฉ (ุงูุฃุณุจูุน ุงููุงุฏู)
- [ ] ุฅุถุงูุฉ ุชูุงุฑูุฑ ุงูุตูุงูุฉ ุงููุชููุนุฉ
- [ ] ุฅุถุงูุฉ ุชูุงุฑูุฑ ุงูุฅููุงู ุงูููุตูุฉ
- [ ] ุชูุงุฑูุฑ ุญุฑูุฉ ุงูุฃุฌูุฒุฉ

---

## ๐งช ุงูุชุญูู ูู ุงูุฅุตูุงุญุงุช

### ุงุฎุชุจุงุฑ ุนุฑุถ ุฃุฑูุงู ุงููุนุงูู:
```
1. ุงุฐูุจ ุฅูู /devices
2. ุชุญูู ูู ูุฌูุฏ ุฑูู ุงููุนุงูู ุชุญุช ูู ุฌูุงุฒ
3. ุชุญูู ูู ุนุฑุถ ุงุณู ุงููุนุงูู ูุงูุฑูุฒ
```

### ุงุฎุชุจุงุฑ ุฅุถุงูุฉ ุฌูุงุฒ:
```
1. ุงุฐูุจ ุฅูู /devices/new
2. ุงุฎุชุฑ Faculty โ Department โ Laboratory
3. ุฃุฏุฎู ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ
4. ุงุถุบุท Create
5. ุชุญูู ูู ุธููุฑ ุงูุฌูุงุฒ ูู ุงููุงุฆูุฉ
```

### ุงุฎุชุจุงุฑ Transfer:
```
1. ุงุฐูุจ ุฅูู /transfers/new
2. ุงุฎุชุฑ ุฌูุงุฒ
3. ุงุฎุชุฑ ุงููุนุงูู ุงูุฌุฏูุฏ
4. ุฃุฑุณู ุงูุทูุจ
5. ุชุญูู ูู ุชุญุฏูุซ ูููุน ุงูุฌูุงุฒ
```

---

## ๐ ููุงุญุธุงุช ุชูููุฉ

### ุนุฏุฏ ุงููุนุงููุงุช ุงูููุฌูุฏุฉ:
- โ 64 ูุนุงูู ูู ุงููุธุงู
- โ ููุฒุนุฉ ุนูู 25 ูุณู
- โ 8 ูููุงุช

### ุนุฏุฏ ุงูุฃุฌูุฒุฉ:
- โ 311 ุฌูุงุฒ ููุฌูุฏ
- โ ุชู ุงุณุชูุฑุงุฏูุง ูู ููู Excel
- โ ุชุญุชุงุฌ ุชุญุฏูุซ ุงููููุน ุงููุนูู

---

## ๐ฏ ุงูุญุงูุฉ ุงูููุงุฆูุฉ

โ **ุชู ุงูุฅุตูุงุญ:**
- ุนุฑุถ ุฃุฑูุงู ุงููุนุงูู
- Logging ุฃูุถู ููุฃุฎุทุงุก

โ๏ธ **ูุญุชุงุฌ ุงุฎุชุจุงุฑ:**
- ุฅุถุงูุฉ ุงูุฃุฌูุฒุฉ ุงูุฌุฏูุฏุฉ
- Transfer ูุงููููุน

โ๏ธ **ูุญุชุงุฌ ุชุญุณูู:**
- ุงูุชูุงุฑูุฑ ุงูููุตูุฉ
- ุงูุฅุญุตุงุฆูุงุช ุงูุฏูููุฉ

---

**ุขุฎุฑ ุชุญุฏูุซ:** 30 ููุงูุฑ 2025 - 17:00 GMT+2
